# 股票行情小工具使用说明

## 🎯 主要功能

这个应用支持两种显示模式：
1. **任务栏模式**（默认）：直接在Windows任务栏显示股票信息，类似"资讯与兴趣"
2. **系统托盘模式**：在系统托盘显示图标和股票信息

## 📱 使用方法

### 1. 启动应用

#### 任务栏模式（推荐）
```bash
# 使用专用启动脚本
start-taskbar.bat

# 或直接使用npm
npm install
npm start
```

#### 系统托盘模式
```bash
# 修改config.js中的displayMode为'tray'
npm install
npm start
```

### 2. 任务栏显示模式

- **任务栏按钮**：应用会在任务栏显示一个按钮，显示当前股票信息
- **实时更新**：股票信息每5秒自动轮播显示下一个股票
- **悬停提示**：鼠标悬停在任务栏按钮上可以看到详细信息
- **点击操作**：左键点击显示/隐藏主窗口，右键点击打开菜单

### 3. 系统托盘模式

- **托盘图标**：在系统托盘（任务栏右侧）显示图标
- **悬停提示**：鼠标悬停显示股票信息
- **菜单操作**：右键点击显示完整菜单

## ⚙️ 配置设置

### 配置文件 (config.js)

```javascript
{
    // 显示模式: 'taskbar' 或 'tray'
    displayMode: 'taskbar',
    
    // 股票轮播间隔（毫秒）
    stockRotationInterval: 5000,
    
    // 数据刷新间隔（毫秒）
    stockDataRefreshInterval: 30000,
    
    // 任务栏显示格式
    taskbarDisplayFormat: {
        showEmoji: true,        // 显示表情符号
        showChangeSymbol: true, // 显示涨跌符号
        showPercentage: true,   // 显示涨跌幅
        showInTitle: true,      // 在任务栏标题显示
        showInTooltip: true     // 在悬停提示显示
    }
}
```

### 主窗口设置
1. 点击任务栏按钮或托盘图标显示主窗口
2. 点击"设置"按钮打开设置面板
3. 可以配置以下参数：
   - **数据刷新间隔**: 多久从服务器获取一次新数据（5-300秒）
   - **任务栏轮播间隔**: 在任务栏中多久切换显示一个股票（2-60秒）
   - **股票代码**: 要监控的股票代码，用逗号分隔

### 默认配置
- 股票代码: 000001（平安银行）、600000（浦发银行）、000858（五粮液）
- 数据刷新间隔: 30秒
- 任务栏轮播间隔: 5秒

## 🎨 显示效果

### 任务栏模式
任务栏按钮会显示：
```
🟢 000001 ¥12.34 ↗0.45
```

悬停提示会显示：
```
🟢 000001 平安银行
¥12.34 ↗0.45 (3.78%)
```

### 系统托盘模式
悬停提示会显示：
```
🟢 000001 平安银行
¥12.34 ↗0.45 (3.78%)
```

## 🔧 故障排除

### 如果任务栏没有显示
1. 检查 `config.js` 中的 `displayMode` 是否为 `'taskbar'`
2. 确保 `skipTaskbar: false` 在 `main.js` 中设置
3. 检查控制台输出

### 如果应用没有显示
1. 检查控制台输出
2. 确保图标文件存在（assets/icon.png）
3. 尝试重新启动应用

### 如果股票信息没有更新
1. 检查是否启用了任务栏显示
2. 确认股票数据已加载
3. 查看控制台日志

## 📋 系统要求

- Windows 10/11
- Node.js 16.0+
- 网络连接（用于获取股票数据）

## 🚀 开发模式

开发模式下会显示更多调试信息：
```bash
npm run dev
```

## 📁 文件结构

```
stock-ticker-widget/
├── main.js              # 主进程（任务栏按钮、定时任务）
├── renderer.js          # 渲染进程（UI界面）
├── preload.js           # 预加载脚本
├── config.js            # 配置文件
├── index.html           # 主窗口
├── styles.css           # 样式文件
├── start-taskbar.bat    # 任务栏模式启动脚本
└── assets/              # 资源文件
    └── icon.png         # 应用图标
```

## 🔄 工作流程

### 任务栏模式
1. 应用启动 → 创建任务栏按钮
2. 获取股票数据 → 更新内存数据
3. 启动轮播定时器 → 每5秒切换显示一个股票
4. 更新任务栏标题 → 显示当前股票信息
5. 定时刷新数据 → 保持数据最新

### 系统托盘模式
1. 应用启动 → 创建系统托盘图标
2. 获取股票数据 → 更新内存数据
3. 启动轮播定时器 → 每5秒切换显示一个股票
4. 更新托盘提示 → 显示当前股票信息
5. 定时刷新数据 → 保持数据最新

## 💡 自定义建议

- 可以修改 `config.js` 来调整显示模式和其他设置
- 可以添加更多股票代码到监控列表
- 可以调整轮播间隔来适应不同需求
- 可以集成真实的股票API来获取实时数据
- 可以自定义任务栏显示格式和样式

## 🔄 模式切换

要切换显示模式，只需修改 `config.js` 中的 `displayMode` 字段：
- `'taskbar'`: 任务栏模式（类似资讯与兴趣）
- `'tray'`: 系统托盘模式（传统方式）

修改后重启应用即可生效。
